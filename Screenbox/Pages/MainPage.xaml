<Page
    x:Class="Screenbox.Pages.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:animatedVisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:Screenbox.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    Background="Transparent"
    Loaded="MainPage_Loaded"
    mc:Ignorable="d">

    <Page.Resources>
        <ResourceDictionary>
            <!--<Thickness x:Key="NavigationViewContentMargin">0,46,0,0</Thickness>-->
            <Thickness x:Key="NavigationViewContentGridBorderThickness">1,0,0,0</Thickness>
            <CornerRadius x:Key="NavigationViewContentGridCornerRadius">0,0,0,0</CornerRadius>
        </ResourceDictionary>
    </Page.Resources>

    <Grid>
        <Grid
            x:Name="AppTitleBar"
            Height="46"
            VerticalAlignment="Top"
            Canvas.ZIndex="1">
            <!--  Width of the padding columns is set in LayoutMetricsChanged handler.  -->
            <!--
                Using padding columns instead of Margin ensures that the background
                paints the area under the caption control buttons (for transparent buttons).
            -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="LeftPaddingColumn" Width="0" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition x:Name="RightPaddingColumn" Width="0" />
            </Grid.ColumnDefinitions>

            <Border
                x:Name="TitleBarElement"
                Grid.Column="0"
                Grid.ColumnSpan="3"
                Margin="44,0,0,0"
                Background="Transparent" />

            <StackPanel
                x:Name="AppTitle"
                Grid.Column="1"
                Margin="58,0,0,0"
                VerticalAlignment="Center"
                IsHitTestVisible="False"
                Orientation="Horizontal">
                <Image
                    Width="18"
                    Height="18"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Source="ms-appx:///Assets/StoreLogo.png" />
                <TextBlock
                    Margin="12,0,0,0"
                    VerticalAlignment="Center"
                    Style="{StaticResource CaptionTextBlockStyle}"
                    Text="Screenbox" />
            </StackPanel>
        </Grid>

        <muxc:NavigationView
            x:Name="NavView"
            BackRequested="NavView_BackRequested"
            Canvas.ZIndex="0"
            DisplayModeChanged="NavView_OnDisplayModeChanged"
            IsTitleBarAutoPaddingEnabled="False"
            PaneClosing="NavView_OnPaneClosing"
            PaneOpening="NavView_OnPaneOpening"
            SelectionChanged="NavView_SelectionChanged">
            <muxc:NavigationView.MenuItems>
                <muxc:NavigationViewItem
                    Content="Home"
                    Icon="Home"
                    Tag="home" />
                <muxc:NavigationViewItem Content="Videos" Tag="videos">
                    <muxc:NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xe8b2;" />
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
                <muxc:NavigationViewItem
                    Content="Music"
                    Icon="Audio"
                    Tag="music" />
                <muxc:NavigationViewItemSeparator />
                <muxc:NavigationViewItem
                    Content="Play queue"
                    Icon="MusicInfo"
                    Tag="queue" />
            </muxc:NavigationView.MenuItems>
            <muxc:NavigationView.AutoSuggestBox>
                <AutoSuggestBox PlaceholderText="Search" QueryIcon="Find" />
            </muxc:NavigationView.AutoSuggestBox>

            <Frame
                x:Name="ContentFrame"
                Padding="56,12,0,14"
                Navigated="ContentFrame_Navigated"
                NavigationFailed="ContentFrame_NavigationFailed" />
        </muxc:NavigationView>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="TitleBarGroup">
                <VisualState x:Name="Expanded" />
                <VisualState x:Name="Compact">
                    <VisualState.Setters>
                        <Setter Target="AppTitle.Margin" Value="74,0,0,0" />
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="Minimal">
                    <VisualState.Setters>
                        <Setter Target="TitleBarElement.Margin" Value="84,0,0,0" />
                        <Setter Target="AppTitle.Margin" Value="98,0,0,0" />
                        <Setter Target="ContentFrame.Padding" Value="12,12,0,12" />
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="Hidden">
                    <VisualState.Setters>
                        <Setter Target="AppTitleBar.Visibility" Value="Collapsed" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</Page>
